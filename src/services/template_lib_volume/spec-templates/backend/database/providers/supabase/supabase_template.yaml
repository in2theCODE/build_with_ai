id: supabase_template
name: Supabase Configuration
description: Template for setting up and configuring Supabase
version: 1.0.0
category: backend/database/providers
sections:
  - name: project_info
    description: Supabase project information
    fields:
      - name: project_name
        type: STRING
        description: Name of the Supabase project
        required: true
        default_value: ""
        validation_rules:
          - rule_type: MIN_LENGTH
            expression: "1"
            error_message: "Project name cannot be empty"
      - name: region
        type: ENUM
        description: Supabase hosting region
        required: true
        default_value: "us-east-1"
        validation_rules:
          - rule_type: ENUM_VALUES
            expression: "us-east-1,us-west-1,eu-central-1,eu-west-1,ap-southeast-1,ap-northeast-1"
            error_message: "Must be a valid Supabase region"
      - name: pricing_tier
        type: ENUM
        description: Supabase pricing tier
        required: true
        default_value: "Free"
        validation_rules:
          - rule_type: ENUM_VALUES
            expression: "Free,Pro,Team,Enterprise"
            error_message: "Must be a valid Supabase pricing tier"
  - name: database
    description: Database configuration
    fields:
      - name: postgres_version
        type: ENUM
        description: PostgreSQL version
        required: true
        default_value: "14"
        validation_rules:
          - rule_type: ENUM_VALUES
            expression: "14,15"
            error_message: "Must be a valid PostgreSQL version"
      - name: schemas
        type: ARRAY
        description: Database schemas to create
        required: true
        default_value: |
          [
            "public",
            "auth"
          ]
        validation_rules: []
      - name: tables
        type: ARRAY
        description: Tables to create
        required: true
        default_value: "[]"
        validation_rules: []
      - name: table_template
        type: OBJECT
        description: Template for a table definition (not to be filled out directly)
        required: false
        default_value: |
          {
            "name": "table_name",
            "schema": "public",
            "columns": [
              {
                "name": "id",
                "type": "uuid",
                "primary_key": true,
                "nullable": false,
                "default": "gen_random_uuid()"
              },
              {
                "name": "created_at",
                "type": "timestamp with time zone",
                "nullable": false,
                "default": "now()"
              }
            ],
            "rls_enabled": true,
            "policies": []
          }
        validation_rules: []
      - name: policy_template
        type: OBJECT
        description: Template for an RLS policy (not to be filled out directly)
        required: false
        default_value: |
          {
            "name": "policy_name",
            "operation": "SELECT",
            "definition": "auth.uid() = user_id",
            "roles": ["authenticated"]
          }
        validation_rules: []
      - name: enable_extensions
        type: ARRAY
        description: PostgreSQL extensions to enable
        required: false
        default_value: |
          [
            "uuid-ossp",
            "pgcrypto"
          ]
        validation_rules: []
  - name: authentication
    description: Authentication settings
    fields:
      - name: enable_email_auth
        type: BOOLEAN
        description: Enable email/password authentication
        required: true
        default_value: "true"
        validation_rules: []
      - name: enable_phone_auth
        type: BOOLEAN
        description: Enable phone authentication
        required: true
        default_value: "false"
        validation_rules: []
      - name: enable_oauth
        type: BOOLEAN
        description: Enable OAuth providers
        required: true
        default_value: "false"
        validation_rules: []
      - name: oauth_providers
        type: ARRAY
        description: OAuth providers to enable
        required: false
        default_value: |
          [
            "google",
            "github"
          ]
        validation_rules: []
      - name: jwt_expiry
        type: STRING
        description: JWT token expiry time
        required: true
        default_value: "3600"
        validation_rules:
          - rule_type: PATTERN
            expression: "^\\d+$"
            error_message: "Must be a valid number in seconds"
  - name: storage
    description: Storage configuration
    fields:
      - name: enable_storage
        type: BOOLEAN
        description: Enable Supabase Storage
        required: true
        default_value: "false"
        validation_rules: []
      - name: storage_buckets
        type: ARRAY
        description: Storage buckets to create
        required: false
        default_value: |
          [
            {
              "name": "public",
              "public": true
            },
            {
              "name": "private",
              "public": false
            }
          ]
        validation_rules: []
  - name: api
    description: API and serverless functions
    fields:
      - name: enable_edge_functions
        type: BOOLEAN
        description: Enable Edge Functions
        required: true
        default_value: "false"
        validation_rules: []
      - name: edge_functions
        type: ARRAY
        description: Edge Functions to create
        required: false
        default_value: "[]"
        validation_rules: []
